# Reroute all App URLs under the dynamic path pattern to the React app
[[redirects]]
  from = "/app/*"
  to = "/app.html"
  status = 200

# Redirect domain aliases to primary domain
[[redirects]]
  from = "https://aut-bot.com/*"
  to = "https://archit.us/:splat"
  status = 301
  force = true
[[redirects]]
  from = "https://www.aut-bot.com/*"
  to = "https://archit.us/:splat"
  status = 301
  force = true

# Redirect default Netlify subdomain to primary domain
[[redirects]]
  from = "https://architus.netlify.com/*"
  to = "https://archit.us/:splat"
  status = 301
  force = true

[build]
  # Disable type checking on building to save time on Netlify
  command = "yarn build --no-type-check"
  environment = { NODE_ENV = "production", SITE_ROOT = "https://develop.archit.us", BUILD_LOCATION = "remote", APP_NAME = "Architus Canary" }

[context.production]
  command = "yarn build"
  environment = { PRODUCTION = "true", SITE_ROOT = "https://archit.us", BUILD_TAG = "prod", APP_NAME = "Architus" }

